<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Geolocation Full API Test</title>
	<link rel="stylesheet" href="../css/base.css" type="text/css" media="screen">
</head>

<body>

<script>
(function () {
	var hasAccepted = false;
	function check_geolocation(location) {
		var geoCheck = document.getElementById("geo_check");
		var geoStatus = document.getElementById("geo_status");
		if (hasAccepted){
			if (location) { 
				geoStatus.innerHTML += "PASS";
				var coords = location.coords;
				var time = location.timestamp;
				geoCheck.innerHTML += "Coords:" + "<br />"
				geoCheck.innerHTML += "Latitude: " + coords.latitude + "<br />"
				geoCheck.innerHTML += "Longitude: " + coords.longitude + "<br />"
				geoCheck.innerHTML += "Altitude: " + coords.altitude + "<br />"
				geoCheck.innerHTML += "Accuracy: " + coords.accuracy + "<br />"
				geoCheck.innerHTML += "Altitude Accuracy: " + coords.altitudeAccuracy + "<br />"
				geoCheck.innerHTML += "Heading: " + coords.heading + "<br />"
				geoCheck.innerHTML += "Speed: " + coords.speed + "<br />"
				geoCheck.innerHTML += "Timestamp: " + time + "<br />"
				
			}else{
				geoStatus.innerHTML += "FAIL";
				geoCheck.innerHTML += "Geolocation not supported."
			}	
		}else{
			geoStatus.innerHTML += "FAIL";

		}
	//code for google map
	//mapsurl = "http://maps.google.com/maps?f=q&source=s_q&hl=en&q=" + coords.latitude + ",+" + coords.longitude;
	//d.innerHTML += "<iframe name=map src=" + mapsurl + " width=80% height=80%></iframe>"
	}
	
	function successCallback(position) {
		check_geolocation(position);
	}
	
	function accept() {
		hasAccepted = true;
	}
	
	navigator.geolocation.getCurrentPosition(successCallback, null, null);
	setTimeout(accept, 50);
        
})();
</script>

	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<!--                GEOLOCATION                     -->
	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->	
	
	<div class="container">
		<table class="table_view">
			<tr>
			    <td>
				    Geolocation Full API Test
				</td>
			    <td class="col_check">
			        <p id="geo_check"></p>
			    </td>
			    <td class="col_status">
			        <p id="geo_status"></p>
			    </td>
			</tr>
		</table>
	</div>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script src="js/geolocation.js"></script>
</body>
</html>